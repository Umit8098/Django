### 1_ders
create project  and "welcome backend"
model - create student

$ python --version
$ pip --version

$ python -m venv env    (veya py -m venv env)
$ .\env\Scripts\activate

$ pip install django   # install django and       (python -m pip install --upgrade pip  # optional -- upgrade pip version     veya    py -m pip install --upgrade pip)

$ pip freeze    # control 
$ pip freeze > requirement.txt     (projenin sonunda da yapılabilir.)
(pip install -r .\requirements.txt)

$ django-admin startproject main .

$ gitignore template (react - django vs) : https://www.toptal.com/developers/gitignore/api/django

$ gitignore template (react - django vs) : https://www.toptal.com/developers/gitignore

$ python manage.py startapp fscohort # create a app  (veya py manage.py startapp fscohort)
$ add app to installed_apps in settings.py

$ python manage.py runserver      (veya py manage.py runserver)

- main/urls.py >>>>> include application
- fscohort/urls.py >>>> call view


-------------- models ----------------

-models.py 'da Student tablosunu oluşturuyoruz;

$ from django.db import models
$ class Student(models.Model):
      first_name = models.CharField(max_length=20)
      last_name = models.CharField(max_length=30)
      number = models.IntegerField()
      about_me = models.TimeField(null=True, blank=True)
      image = models.ImageField(null=True, blank=True, upload_to="media/")
      register_date = models.DateTimeField(auto_now_add=True)
      last_update_date = models.DateTimeField(auto_now=True)

      (ImageField kullanacağımız zaman pythonun image kütüphanesini (Pillow) yüklememiz lazım.
      $ python -m pip install Pillow    veya    $ pip install Pillow)

      ImageField kullandığımız zaman browserda resmi görebilmek için image ile ilgili bir url ayarlaması yapmamız gerekir.
      settings.py' a gidip en alt kısma

      $ MEDIA_URL = "/media/"
      $ MEDIA_ROOT = os.path.join(BASE_DIR, "media")
      belirtmemiz gerekiyor. os ' i de import etmemiz gerekiyor.

      $ import os

      (Python' da sabitler, değiştirilmezler büyük harfle yazılıyor.)

      settings' de ayar yaptıktan sonra ilgili app'in url'inde ayar yapacağız.

      önce impor yapıyoruz,

      $ from django.conf import settings
      $ from django.conf.urls.static import static
      
      aşağıya da,

      $ urlpatterns +=static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)

      yazıyoruz.(Burda sorun çıktı, sorunu da modeldeki upload'ı silerek çözdük.)


      def __str__(self):
        return (f"{self.number} - {self.first_name}")
    ( def __str__(self) fonksiyonu db' de sadece görünümde bir değişiklik yapıyor, içerikte bir değişikliğe neden olmadığı için makemigrations ve migrate komutlarını çalıştırmıyoruz.)  

      class Meta:
        ordering = ["number"]                 (database'de değişiklik yapmıyor.)
        verbose_name_plural = "Student_List"  (database'de değişiklik yapmıyor.)
        db_table = "Student_Table"            (database'de değişiklik yapıyor (tablonun ismini değiştiriyor.) o yüzden makemigrations ve migrate komutlarını çalıştırmamız gerekiyor.)


$ py manage.py makemigrations

$ py manage.py migrate



-admin paneli ayağa kaldırmak için superuser oluşturuyoruz;
$ py manage.py createsuperuser  (username ve pasword giriyoruz.)

admin.py dosyasına 
$ from .models import Student
$ admin.site.register(Student)








### 2_ders

////// ORM Queries /////

(views oluşturmadığımız için orm sorguları için shell kullanacağız.Normalde queryleri views içerisinde yapıyoruz.) 

$ py manage.py shell
(ancak bu shell yeterince iyi değil)
exit()
(shell'i daha kullanışlı interactive hale getirmek için aşağıdaki paketleri yükledik.Bu paketler özellikle extensions bize extra kabiliyetler kazandırıyor.)

$ pip install django_extensions
$ pip install ipython

(django_extensions paketini install app' e yüklememiz gerekiyor.)

(Bu ikisiyle birlikte tekrar shell' i çalıştıracağız, ama komut biraz değişti)

$ py manage.py shell_plus --ipython

(Artık daha interactive bir shell'imiz var.)

$ cls (bu komut terminal ekranını temizliyor)

$ from fscohort.models import Student
$ s1 = Student(first_name="Henry", last_name="Forester", number=223)
($ s1    yazarsak terminale     <Student: 223 - Henry>  verir bize. Ancak db' ye kaydetmez. db' ye kaydetmek için s1.save() yazmamız gerekir.)

(s1.save() yazmadan kaydetmek istersek: 
$ s2 = Student.objects.create(first_name="John", last_name="Doe", number=212)  şeklinde yazmalıyız.)

(Bu aşamadan sonra eğer modelde değişiklik yaparsak, bu değişiklik shell' e yansımaz, shell den  $ exit()  ile çıkıp tekrar shell'e girmemiz gerekir. $ py manage.py shell_plus --ipython   )


/////// Sık kullanılan ORM sorguları: ///////////

$ s_all = Student.objects.all()   (s_all enter -> Student Tablomuzdaki tüm verileri queryset olarak s_all' un içine atıyor. )

$ f1 = Student.objects.get(first_name="John")   (f1 enter -> get ile specific bir obje çekiyoruz.Birden fazla varsa hata verir.)

$ s2 = Student.objects.filter(number=123)        (s2 enter -> number=123 olanları filtreleyip getirdi)

$ s3 = Student.objects.filter(number=212)        (s3 enter -> filter ile çağırırsak <QuerySet [<Student: 212 - John>]> olarak döndürüyor. $ s3.first_name dersek getirmez. s3[0].first_name dersek "John" döndürür bize. )

$ f1 = Student.objects.get(first_name="John")     (f1 enter -> get ile çağırırsak specific bir nesne geldiği için $ f1.first_name dersek bize 'John' getirir.)

$ f3 = Student.objects.filter(first_name__startswith="j")    (j ile başlayanları getir.)

$ f3 = Student.objects.filter(first_name__contains="e")      (first_name de e içerenleri getir.)


$ exit()

$ cls




Common Field Types and field options

### 3_ders

////////// realtionship ///////////

(yeni bir app oluşturuyoruz)
$ py manage.py startapp dj_relationships

1 to 1
many to 1
many to many

on_delete metodunu yazmamız gerekiyor. CASCADE : parent taki objesi silinirse bunu da sil 


genelde en çok kullanılan many to one

